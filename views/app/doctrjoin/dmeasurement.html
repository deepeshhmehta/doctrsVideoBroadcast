<ion-view class="category-list-view">
    <ion-header-bar class="bar app-top-bar">
        <h1 class="title">Measurement</h1>
    </ion-header-bar>
    <form name="addMeasureForm" id="addMeasureForm" enctype="multipart/form-data" novalidate >
        <ion-content>
            <input type="hidden" ng-model="record.recordUser" value="{{userId}}" name="userId" />
            <input type="hidden" value="{{catId}}" name="rectype" />
            <input type="hidden" ng-model="record.recordPatient" value="{{patientId}}" name="patient" />
            <input type="hidden" ng-model="record.recordPatient" value="{{doctorId}}" name="doctor" />
            <input type="hidden" ng-model="record.recordCat" value="{{record.id}}" name="recordCat" />
            <input type="hidden" ng-model="record.mid" value="{{mid}}" name="mid" />
            <input type="hidden" value="{{measure}}" name="measurement" />
            <div class="tabcon2">
                <div ng-repeat="record in records">
                    <div class="item item-divider">{{record.category}}</div>
                    <div ng-repeat="field in fields[$index]">
                        <div ng-if="field.field_types.value == 'number'">
                            <div ng-if="abt.length != 0">
                                <div ng-repeat="ab in abt">
                                    <label class="item item-input" ng-if="ab.field_id == field.name">
                                        <input type="number" placeholder="{{field.field}}" name="{{field.name}}" value="{{ab.value}}">
                                    </label>
                                </div>
                            </div>
                            <div ng-if="abt.length == 0">
                                <label class="item item-input" >
                                    <input type="number" placeholder="{{field.field}}" name="{{field.name}}">
                                </label>
                            </div>
                        </div>
                        <div ng-if="field.field_types.value == 'select'">
                            <div ng-if="abt.length != 0">
                                <div ng-repeat="ab in abt">
                                    <label class="item item-input item-select" ng-if="ab.field_id == field.name">
                                        <div class="input-label">{{field.field}}</div>
                                        <select class="cselect" ng-init="selData = (field.field_values).split(',')" name="{{field.name}}">
                                            <option ng-repeat="sel in selData" value="{{sel}}" ng-selected="sel == ab.value"> {{sel}} </option>
                                        </select>
                                    </label>
                                </div>
                            </div>
                            <div ng-if="abt.length == 0">
                                <label class="item item-input item-select">
                                    <div class="input-label">{{field.field}}</div>
                                    <select class="cselect" ng-init="selData = (field.field_values).split(',')" name="{{field.name}}">
                                        <option value="" ng-selected="1"> Select {{field.field}}</option>
                                        <option ng-repeat="sel in selData" value="{{sel}}"> {{sel}} </option>
                                    </select>
                                </label>
                            </div>
                        </div>
                        <div ng-if="field.field_types.value == 'text'">
                            <div ng-if="abt.length != 0">
                                <div ng-repeat="ab in abt">
                                    <label class="item item-input" ng-if="ab.field_id == field.name">
                                        <input type="text" placeholder="{{field.field}}" name="{{field.name}}" value="{{ab.value}}">
                                    </label>
                                </div>
                            </div>
                            <div ng-if="abt.length == 0">
                                <label class="item item-input" >
                                    <input type="text" placeholder="{{field.field}}" name="{{field.name}}">
                                </label>
                            </div>
                        </div>
                        <div ng-if="field.field_types.value == 'date'">
                            <div ng-if="abt.length != 0">
                                <div ng-repeat="ab in abt">
                                    <label class="item item-input" ng-if="ab.field_id == field.name">
                                        <input type="date" placeholder="{{field.field}}" name="{{field.name}}" value="{{ab.value}}">
                                    </label>
                                </div>
                            </div>
                            <div ng-if="abt.length == 0">
                                <label class="item item-input" >
                                    <input type="date" placeholder="{{field.field}}" name="{{field.name}}">
                                </label>
                            </div>
                        </div>
                    </div>
                </div>  
            </div>
        </ion-content>
            <div class="button btn-delete iframeclose"><i class="ion-close"></i></div>
            <button class="button btn-add iframesubmit" ng-click="saveDMeasurements()" ><i class="ion-checkmark"></i> Save </button>
    </form>
</ion-modal-view>