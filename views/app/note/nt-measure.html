
<div class="tcontent" ng-controller="MeasurementCtrl">
    <form name="addMeasureForm" id="addMeasureForm" enctype="multipart/form-data" novalidate >
        <input type="hidden" ng-model="record.recordUser" value="{{userId}}" name="userId" />
        <input type="hidden" value="{{catId}}" name="rectype" />
        <input type="hidden" ng-model="record.recordPatient" value="{{patientId}}" name="patient" />
        <input type="hidden" ng-model="record.recordPatient" value="{{doctorId}}" name="doctor" />
        <input type="hidden" ng-model="record.recordCat" value="{{record.id}}" name="recordCat" />
        <input type="hidden" value="{{recId}}" name="cnId" />
        <input type="hidden" value="{{appId}}" name="appId" />
        <input type="hidden" ng-model="record.mid" value="{{mid}}" name="mid" />
        <input type="hidden" value="{{measure}}" name="measure" />
        <div  ng-repeat="record in mrecords">
            <div class="heading2">{{record.category}}</div>
            <div class="mt20" ng-repeat="field in mfields[$index]">
                <div ng-if="field.field_types.value == 'number'">
                    <div ng-if="abtMeasure.length != 0">
                        <div ng-repeat="ab in abtMeasure" ng-if="ab.field_id == field.name">
                            <div class="item item-divider">{{field.field}}</div>
                            <label class="item item-input">
                                <input class="form-control" type="number" placeholder="{{field.field}}" name="{{field.name}}" value="{{ab.value}}" />
                            </label>
                        </div>
                    </div>
                    <div ng-if="abtMeasure.length == 0">
                        <div class="item item-divider">{{field.field}}</div>
                        <label class="item item-input">
                            <input class="form-control" type="number" placeholder="{{field.field}}" name="{{field.name}}" />
                        </label>
                    </div>
                </div>
                <div ng-if="field.field_types.value == 'select'">
                    <div ng-if="abtMeasure.length != 0">
                        <div ng-repeat="ab in abtMeasure" ng-if="ab.field_id == field.name">
                            <div class="item item-divider">{{field.field}}</div>
                            <select class="form-control cselect" ng-init="selData = (field.field_values).split(',')" name="{{field.name}}">
                                <option ng-repeat="sel in selData" value="{{sel}}" ng-selected="sel == ab.value"> {{sel}} </option>
                            </select>
                        </div>
                    </div>
                    <div ng-if="abtMeasure.length == 0">
                        <div class="item item-divider">{{field.field}}</div>
                        <select class="form-control cselect" ng-init="selData = (field.field_values).split(',')" name="{{field.name}}">
                            <option value="" ng-selected="1"> Select {{field.field}}</option>
                            <option ng-repeat="sel in selData" value="{{sel}}"> {{sel}} </option>
                        </select>
                    </div>
                </div>
                <div ng-if="field.field_types.value == 'text'">
                    <div ng-if="abtMeasure.length != 0">
                        <div ng-repeat="ab in abtMeasure" ng-if="ab.field_id == field.name">
                            <div class="item item-divider">{{field.field}}</div>
                            <label class="item item-input">
                                <input class="form-control" type="text" placeholder="{{field.field}}" name="{{field.name}}" value="{{ab.value}}" />
                            </label>
                        </div>
                    </div>
                    <div ng-if="abtMeasure.length == 0">
                        <div class="item item-divider">{{field.field}}</div>
                        <label class="item item-input">
                            <input class="form-control" type="text" placeholder="{{field.field}}" name="{{field.name}}" />
                        </label>
                    </div>
                </div>
                <div ng-if="field.field_types.value == 'date'">
                    <div ng-if="abtMeasure.length != 0">
                        <div ng-repeat="ab in abtMeasure" ng-if="ab.field_id == field.name">
                            <div class="item item-divider">{{field.field}}</div>
                            <label class="item item-input">
                                <input class="form-control" type="date" placeholder="{{field.field}}" name="{{field.name}}" value="{{ab.value}}" />
                            </label>
                        </div>
                    </div>
                    <div ng-if="abtMeasure.length == 0">
                        <div class="item item-divider">{{field.field}}</div>
                        <label class="item item-input">
                            <input class="form-control" type="date" placeholder="{{field.field}}" name="{{field.name}}" />
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <button class="button button-block button-positive mtop20" ng-click="saveMeasurements()"> Save</button>
                <div class="foterspacing"></div>
            </div>
        </div>
    </form>
</div>