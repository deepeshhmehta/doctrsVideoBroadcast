<div>
    <div class="mtabcon" delegate-handle="mainScroll">
        <div class="row">
            <div class="col">
                <div class="fdropdown">
                    <div class="navlist" ng-click="togglemenu('Tdnav')"> <i class="ion-filter"></i> &nbsp; Type</div>
                    <div class="dnav" id="Tdnav">
                        <ion-list>
                            <ion-checkbox id="fteval" ng-model="finv" ng-checked="{{finv}}" ng-click="showTreatment('invest', finv)">Investigation</ion-checkbox>
                            <ion-checkbox ng-model="fmedi" ng-checked="{{fmedi}}" ng-click="showTreatment('medi', fmedi)" > Medication</ion-checkbox>
                            <ion-checkbox ng-model="flife" ng-checked="{{flife}}" ng-click="showTreatment('life', flife)" > Task</ion-checkbox>
                            <ion-checkbox ng-model="fproc" ng-checked="{{fproc}}" ng-click="showTreatment('proc', fproc)" > Procedures</ion-checkbox>
                            <ion-checkbox ng-model="fref" ng-checked="{{fref}}" ng-click="showTreatment('ref', fref)" > Referral</ion-checkbox>
                            <ion-checkbox ng-model="fdiet" ng-checked="{{fdiet}}" ng-click="showTreatment('diet', fdiet)" > Diet Plan</ion-checkbox>
                        </ion-list>
                        <div class="row">
                            <div class="col"><button class="button button-balanced" ng-click="FilterResults()">Apply</button></div>
                            <div class="col"><button class="button button-assertive" ng-click="ResetFilter()">Reset</button></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col">
                <select class="cselectn brdbx" ng-model="nadd" name="nadd" ng-change="changeTrtment(nadd)" value="+ Add">
                    <option value="null"> + Add</option>
                    <option value="investigation" >Investigation</option>
                    <option value="medication" >Medication</option>
                    <option value="task" >Task</option>
                    <option value="procedure" >Procedure</option>
                    <option value="referral" >Referral</option>
                    <option value="dietplan" >Diet Plan</option>
                </select>
            </div>
        </div>
        <div class="formcontainer" ng-show="tinvestigation">
            <div ng-controller="InvestigationsJoinCtrl">
                <form name="addInvForm" id="addInvForm" enctype="multipart/form-data" novalidate >
                    <div class="box-body">
                        <div class="form-horizontal">
                            <input type="hidden" ng-model="record.recordPatient" value="{{patientId}}" name="patient" />
                            <input type="hidden" ng-model="record.recordPatient" value="{{doctorId}}" name="doctor" />
                            <input type="hidden" ng-model="record.recordUser" value="{{userId}}" name="userId" />
                            <input type="hidden" value="{{appId}}" name="appId" />
                            <input type="hidden" value="{{category}}" name="recordCat" />
                            <input type="hidden" value="{{recId}}" name="recId" />
                            <div ng-include src="'views/app/video-note/fields.html'"></div>
                        </div>
                    </div>
                </form>
                <div class="row">
                    <div class="col">
                        <button class="button button-block button-positive" ng-click="saveInvest()">Save</button>
                    </div>
                    <div class="col">
                        <button class="button button-block button-assertive" ng-click="hideformD()">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="formcontainer" ng-show="tmedication" > 
            <div ng-controller="MedicationsJoinCtrl"> 
                <form name="addMedicationForm" id="addMedicationForm" enctype="multipart/form-data" novalidate >
                    <div class="box-body">
                        <div class="form-horizontal">
                            <input type="hidden" ng-model="record.recordPatient" value="{{patientId}}" name="patient" />
                            <input type="hidden" ng-model="record.recordPatient" value="{{doctorId}}" name="doctor" />
                            <input type="hidden" ng-model="record.recordUser" value="{{userId}}" name="userId" />
                            <input type="hidden" value="{{appId}}" name="appId" />
                            <input type="hidden" value="{{category}}" name="recordCat" />
                            <input type="hidden" value="{{recId}}" name="recId" />
                            <div ng-include src="'views/app/video-note/fields.html'"></div>
                        </div>
                    </div>
                </form>
                <div class="row">
                    <div class="col">
                        <button class="button button-block button-positive" ng-click="saveMedi()">Save</button>
                    </div>
                    <div class="col">
                        <button class="button button-block button-assertive" ng-click="hideformD()">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="formcontainer" ng-show="Ttask">
            <div ng-controller="LifeStyleJoinCtrl">
                <form name="addLifeStyleForm" id="addLifeStyleForm" enctype="multipart/form-data" novalidate >
                    <div class="box-body">
                        <div class="form-horizontal">
                            <input type="hidden" ng-model="record.recordPatient" value="{{patientId}}" name="patient" />
                            <input type="hidden" ng-model="record.recordPatient" value="{{doctorId}}" name="doctor" />
                            <input type="hidden" ng-model="record.recordUser" value="{{userId}}" name="userId" />
                            <input type="hidden" value="{{appId}}" name="appId" />
                            <input type="hidden" value="{{category}}" name="recordCat" />
                            <input type="hidden" value="{{recId}}" name="recId" />
                            <div ng-include src="'views/app/video-note/fields.html'"></div>
                        </div>
                    </div>
                </form>
                <div class="row">
                    <div class="col">
                        <button class="button button-block button-positive" ng-click="saveLife()">Save</button>
                    </div>
                    <div class="col">
                        <button class="button button-block button-assertive" ng-click="hideformD()">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="formcontainer" ng-show="Tprocedure">
            <div ng-controller="ProceduresJoinCtrl">
                <form name="addProcedureForm" id="addProcedureForm" enctype="multipart/form-data" novalidate >
                    <div class="box-body">
                        <div class="form-horizontal">
                            <input type="hidden" ng-model="record.recordPatient" value="{{patientId}}" name="patient" />
                            <input type="hidden" ng-model="record.recordPatient" value="{{doctorId}}" name="doctor" />
                            <input type="hidden" ng-model="record.recordUser" value="{{userId}}" name="userId" />
                            <input type="hidden" value="{{appId}}" name="appId" />
                            <input type="hidden" value="{{category}}" name="recordCat" />
                            <input type="hidden" value="{{recId}}" name="recId" />
                            <div ng-include src="'views/app/video-note/fields.html'"></div>
                        </div>
                    </div>
                </form>
                <div class="row">
                    <div class="col">
                        <button class="button button-block button-positive" ng-click="saveProc()">Save</button>
                    </div>
                    <div class="col">
                        <button class="button button-block button-assertive" ng-click="hideformD()">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="formcontainer" ng-show="Treferral">
            <div ng-controller="ReferralJoinCtrl">
                <form name="addReferralForm" id="addReferralForm" enctype="multipart/form-data" novalidate >
                    <div class="box-body">
                        <div class="form-horizontal">
                            <input type="hidden" ng-model="record.recordPatient" value="{{patientId}}" name="patient" />
                            <input type="hidden" ng-model="record.recordPatient" value="{{doctorId}}" name="doctor" />
                            <input type="hidden" ng-model="record.recordUser" value="{{userId}}" name="userId" />
                            <input type="hidden" value="{{appId}}" name="appId" />
                            <input type="hidden" value="{{category}}" name="recordCat" />
                            <input type="hidden" value="{{recId}}" name="recId" />
                            <div ng-include src="'views/app/video-note/fields.html'"></div>
                        </div>
                    </div>
                </form>
                <div class="row">
                    <div class="col">
                        <button class="button button-block button-positive" ng-click="saveRef()">Save</button>
                    </div>
                    <div class="col">
                        <button class="button button-block button-assertive" ng-click="hideformD()">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="formcontainer" ng-show="Tdietplan">
            <div ng-controller="DietJoinCtrl">
                <form name="addDietForm" class="form-horizontal" id="addDietForm" enctype="multipart/form-data" novalidate >
                    <input type="hidden" ng-model="record.recordPatient" value="{{patientId}}" name="patient" />
                    <input type="hidden" ng-model="record.recordPatient" value="{{doctorId}}" name="doctor" />
                    <input type="hidden" ng-model="record.recordUser" value="{{userId}}" name="userId" />
                    <input type="hidden" value="{{appId}}" name="appId" />
                    <input type="hidden" value="{{category}}" name="recordCat" />
                    <input type="hidden" value="{{recId}}" name="recId" />
                    <input type="hidden" value="{{dietId}}" name="dietId" />
                    <div ng-include src="'views/app/video-note/fields.html'"></div>
                </form>
                <div class="row">
                    <div class="col">
                        <button class="button button-block button-positive" ng-click="saveDiet()">Save</button>
                    </div>
                    <div class="col">
                        <button class="button button-block button-assertive" ng-click="hideformD()">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Investigation -->
        <div ng-controller="InvestigationsJoinCtrl" ng-show="investCards">
            <div  class="list card post-item greenbox" ng-repeat="inv in investigation">
                <div class="card-content p0">
                    <div class="row post-heading item item-text-wrap ">
                        <div class="col col-75">
                            <h2 class="post-title">Investigations {{$index + 1}}</h2>
                        </div>
                        <div class="col col-25 txt-right">
                            <div class="infomore" ng-click="infomore(inv.id + 'inv', 'inv')">
                                <span class="infb" id="{{inv.id}}invt"> More</span> <i class="ion-android-arrow-forward"></i>
                            </div>
                        </div>
                    </div>
                    <div class="post-content item item-text-wrap p0">
                        <div class="row" ng-repeat="idata in invData[$index]| limitTo: 4">
                            <div ng-if="idata.value != ''">
                                <div class="col"><strong>{{idata.fields.field}} </strong></div>
                                <div class="col"> 
                                    <div ng-if="idata.fields.field == 'Related Problem'">
                                        <div ng-repeat="problem in problems">
                                            <div ng-if="problem.record_id == idata.value">{{problem.value}}</div>
                                        </div>
                                    </div>
                                    <div ng-if="idata.fields.field_type == '8'"> {{idata.value|dateFormat3}}</div>
                                    <div ng-if="idata.fields.field_type == '12'"> {{idata.value|time1}}</div>
                                    <div ng-if="idata.fields.field != 'Related Problem' && idata.fields.field != 'Attachments' && idata.fields.field_type != '12' && idata.fields.field_type != '8'">
                                        <div> {{idata.value}}</div>
                                    </div>
                                    <div ng-if="idata.fields.field == 'Attachments'">
                                        <div > <div ng-repeat="attach in idata.attachments" >
                                                <div ng-init="selData = (attach.orginial_name).split('.')">
                                                    <div ng-if="selData[1] == 'png' || selData[1] == 'gif' || selData[1] == 'jpg' || selData[1] == 'PNG' || selData[1] == 'GIF' || selData[1] == 'JPG'">
                                                        <a  class="filelink" style="cursor: pointer;" ng-click="showRecAttach(attach.attachment_path, attach.orginial_name)" >
                                                            <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                        </a>
                                                    </div>
                                                    <div ng-if="selData[1] != 'png' && selData[1] != 'gif' && selData[1] != 'jpg' && selData[1] != 'PNG' && selData[1] != 'GIF' && selData[1] != 'JPG'">
                                                        <a class="filelink" href="{{attachpath}}{{attach.attachment_path}}{{attach.orginial_name}}"  download>
                                                            <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>				  
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="infomore-div" id="{{inv.id}}inv">
                            <div class="row" ng-repeat="idata in invData[$index]" ng-if="$index >= 5">
                                <div ng-if="idata.value != ''">
                                    <div class="col"><strong>{{idata.fields.field}} </strong></div>
                                    <div class="col"> 
                                        <div ng-if="idata.fields.field == 'Related Problem'">
                                            <div ng-repeat="problem in problems">
                                                <div ng-if="problem.record_id == idata.value">{{problem.value}}</div>
                                            </div>
                                        </div>
                                        <div ng-if="idata.fields.field_type == '8'"> {{idata.value|dateFormat3}}</div>
                                        <div ng-if="idata.fields.field_type == '12'"> {{idata.value|time1}}</div>
                                        <div ng-if="idata.fields.field != 'Related Problem' && idata.fields.field != 'Attachments' && idata.fields.field_type != '12' && idata.fields.field_type != '8'">
                                            <div> {{idata.value}}</div>
                                        </div>
                                        <div ng-if="idata.fields.field == 'Attachments'">
                                            <div > <div ng-repeat="attach in idata.attachments" >
                                                    <div ng-init="selData = (attach.orginial_name).split('.')">
                                                        <div ng-if="selData[1] == 'png' || selData[1] == 'gif' || selData[1] == 'jpg' || selData[1] == 'PNG' || selData[1] == 'GIF' || selData[1] == 'JPG'">
                                                            <a  class="filelink" style="cursor: pointer;" ng-click="showRecAttach(attach.attachment_path, attach.orginial_name)" >
                                                                <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                            </a>
                                                        </div>
                                                        <div ng-if="selData[1] != 'png' && selData[1] != 'gif' && selData[1] != 'jpg' && selData[1] != 'PNG' && selData[1] != 'GIF' && selData[1] != 'JPG'">
                                                            <a class="filelink" href="{{attachpath}}{{attach.attachment_path}}{{attach.orginial_name}}"  download>
                                                                <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>				  
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Investigation -->
        <!-- medication -->
        <div ng-controller="MedicationsJoinCtrl" ng-show="mediCards">
            <div class="list card post-item greenbox" ng-repeat="med in medication">
                <div class="card-content p0">
                    <div class="row post-heading item item-text-wrap ">
                        <div class="col col-75">
                            <h2 class="post-title">Medication {{$index + 1}}</h2>
                        </div>
                        <div class="col col-25 txt-right">
                            <div class="infomore" ng-click="infomore(med.id + 'med', 'medi')">
                                <span class="infb" id="{{med.id}}medm"> More</span> <i class="ion-android-arrow-forward"></i>
                            </div>
                        </div>
                    </div>
                    <div class="post-content item item-text-wrap p0">
                        <div class="row" ng-repeat="mdata in mediData[$index]| limitTo: 4">
                            <div ng-if="mdata.value != '' && mdata.fields.name != 'no-of-frequency-1'">
                                <div class="col"><strong>{{mdata.fields.field}} </strong></div>
                                <div class="col">
                                    <div ng-if="mdata.fields.field == 'Related Problem'">
                                        <div ng-repeat="problem in problems">
                                            <div ng-if="problem.record_id == mdata.value"> {{problem.value}}</div>
                                        </div>
                                    </div>
                                    <div ng-if="mdata.fields.name == 'frequency'"> {{mdata.value}} {{repeatFreq[$index]}}</div>
                                    <div ng-if="mdata.fields.field_type == '8'"> {{mdata.value|dateFormat3}}</div>
                                    <div ng-if="mdata.fields.field_type == '12'"> {{mdata.value|time1}}</div>
                                    <div ng-if="mdata.fields.field != 'Related Problem' && mdata.fields.name != 'frequency' && mdata.fields.field != 'Attachments' && mdata.fields.field_type != '12' && mdata.fields.field_type != '8'">
                                        <div> {{mdata.value}}</div>
                                    </div>
                                    <div ng-if="mdata.fields.field == 'Attachments'">
                                        <div > <div ng-repeat="attach in mdata.attachments" >
                                                <div ng-init="selData = (attach.orginial_name).split('.')">
                                                    <div ng-if="selData[1] == 'png' || selData[1] == 'gif' || selData[1] == 'jpg' || selData[1] == 'PNG' || selData[1] == 'GIF' || selData[1] == 'JPG'">
                                                        <a  class="filelink" style="cursor: pointer;" ng-click="showRecAttach(attach.attachment_path, attach.orginial_name)" >
                                                            <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                        </a>
                                                    </div>
                                                    <div ng-if="selData[1] != 'png' && selData[1] != 'gif' && selData[1] != 'jpg' && selData[1] != 'PNG' && selData[1] != 'GIF' && selData[1] != 'JPG'">
                                                        <a class="filelink" href="{{attachpath}}{{attach.attachment_path}}{{attach.orginial_name}}"  download>
                                                            <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>				  
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="infomore-div" id="{{med.id}}med">
                            <div class="row" ng-repeat="mdata in mediData[$index]" ng-if="$index >= 5">
                                <div ng-if="mdata.value != '' && mdata.fields.name != 'no-of-frequency-1'">
                                    <div class="col"><strong>{{mdata.fields.field}} </strong></div>
                                    <div class="col"> 
                                        <div ng-if="mdata.fields.field == 'Related Problem'">
                                            <div ng-repeat="problem in problems">
                                                <div ng-if="problem.record_id == mdata.value"> {{problem.value}}</div>
                                            </div>
                                        </div>
                                        <div ng-if="mdata.fields.name == 'frequency'"> {{mdata.value}} {{repeatFreq[$index]}}</div>
                                        <div ng-if="mdata.fields.field_type == '8'"> {{mdata.value|dateFormat3}}</div>
                                        <div ng-if="mdata.fields.field_type == '12'"> {{mdata.value|time1}}</div>
                                        <div ng-if="mdata.fields.field != 'Related Problem' && mdata.fields.name != 'frequency' && mdata.fields.field != 'Attachments' && mdata.fields.field_type != '12' && mdata.fields.field_type != '8'">
                                            <div> {{mdata.value}}</div>
                                        </div>
                                        <div ng-if="mdata.fields.field == 'Attachments'">
                                            <div > <div ng-repeat="attach in mdata.attachments" >
                                                    <div ng-init="selData = (attach.orginial_name).split('.')">
                                                        <div ng-if="selData[1] == 'png' || selData[1] == 'gif' || selData[1] == 'jpg' || selData[1] == 'PNG' || selData[1] == 'GIF' || selData[1] == 'JPG'">
                                                            <a  class="filelink" style="cursor: pointer;" ng-click="showRecAttach(attach.attachment_path, attach.orginial_name)" >
                                                                <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                            </a>
                                                        </div>
                                                        <div ng-if="selData[1] != 'png' && selData[1] != 'gif' && selData[1] != 'jpg' && selData[1] != 'PNG' && selData[1] != 'GIF' && selData[1] != 'JPG'">
                                                            <a class="filelink" href="{{attachpath}}{{attach.attachment_path}}{{attach.orginial_name}}"  download>
                                                                <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>				  
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- end of medication -->
        <!-- lIFE STYLE -->
        <div ng-controller="LifeStyleJoinCtrl" ng-show="lifeCards">
            <div  class="list card post-item greenbox" ng-repeat="life in lifestyle">
                <div class="card-content p0">
                    <div class="row post-heading item item-text-wrap ">
                        <div class="col col-75">
                            <h2 class="post-title">Task {{$index + 1}}</h2>
                        </div>
                        <div class="col col-25 txt-right">
                            <div class="infomore" ng-click="infomore(life.id + 'life', 'life')">
                                <span class="infb" id="{{life.id}}lifel"> More</span> <i class="ion-android-arrow-forward"></i>
                            </div>
                        </div>
                    </div>
                    <div class="post-content item item-text-wrap p0">
                        <div class="row" ng-repeat="ldata in lifeData[$index]| limitTo: 4">
                            <div ng-if="ldata.value != '' && ldata.fields.name != 'no-of-frequency' && ldata.fields.name != 'no-of-times'">
                                <div class="col"><strong>{{ldata.fields.field}} </strong></div>
                                <div class="col"> 
                                    <div ng-if="ldata.fields.field == 'Related Problem'">
                                        <div ng-repeat="problem in problems">
                                            <div ng-if="problem.record_id == ldata.value"> {{problem.value}}</div>
                                        </div>
                                    </div>
                                    <div ng-if="ldata.fields.field == 'Frequency'"> 
                                        <div ng-if="ldata.value == 'Repeat'">{{ldata.value}} in {{repeatNo[$index]}} {{repeatFreq[$index]}}</div>
                                        <div ng-if="ldata.value != 'Repeat'">{{ldata.value}}</div>
                                    </div>
                                    <div ng-if="ldata.fields.field_type == '8'"> {{ldata.value|dateFormat3}}</div>
                                    <div ng-if="ldata.fields.field_type == '12'"> {{ldata.value|time1}}</div>
                                    <div ng-if="ldata.fields.name != 'no-of-times' && ldata.fields.field != 'Frequency' && ldata.fields.field != 'Related Problem' && ldata.fields.field != 'Attachments' && ldata.fields.field_type != '12' && ldata.fields.field_type != '8'">
                                        <div> {{ldata.value}}</div>
                                    </div>
                                    <div ng-if="ldata.fields.field == 'Attachments'">
                                        <div > <div ng-repeat="attach in ldata.attachments" >
                                                <div ng-init="selData = (attach.orginial_name).split('.')">
                                                    <div ng-if="selData[1] == 'png' || selData[1] == 'gif' || selData[1] == 'jpg' || selData[1] == 'PNG' || selData[1] == 'GIF' || selData[1] == 'JPG'">
                                                        <a  class="filelink" style="cursor: pointer;" ng-click="showRecAttach(attach.attachment_path, attach.orginial_name)" >
                                                            <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                        </a>
                                                    </div>
                                                    <div ng-if="selData[1] != 'png' && selData[1] != 'gif' && selData[1] != 'jpg' && selData[1] != 'PNG' && selData[1] != 'GIF' && selData[1] != 'JPG'">
                                                        <a class="filelink" href="{{attachpath}}{{attach.attachment_path}}{{attach.orginial_name}}"  download>
                                                            <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>				  
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="infomore-div" id="{{life.id}}life">
                            <div class="row" ng-repeat="ldata in lifeData[$index]" ng-if="$index >= 5">
                                <div ng-if="ldata.value != '' && ldata.fields.name != 'no-of-frequency' && ldata.fields.name != 'no-of-times'">
                                    <div class="col"><strong>{{ldata.fields.field}} </strong></div>
                                    <div class="col"> 
                                        <div ng-if="ldata.fields.field == 'Related Problem'">
                                            <div ng-repeat="problem in problems">
                                                <div ng-if="problem.record_id == ldata.value">{{problem.value}}</div>
                                            </div>
                                        </div>
                                        <div ng-if="ldata.fields.field == 'Frequency'"> 
                                            <div ng-if="ldata.value == 'Repeat'">{{ldata.value}} in {{repeatNo[$index]}} {{repeatFreq[$index]}}</div>
                                            <div ng-if="ldata.value != 'Repeat'">{{ldata.value}}</div>
                                        </div>
                                        <div ng-if="ldata.fields.field_type == '8'"> {{ldata.value|dateFormat3}}</div>
                                        <div ng-if="ldata.fields.field_type == '12'"> {{ldata.value|time1}}</div>
                                        <div ng-if="ldata.fields.name != 'no-of-times' && ldata.fields.field != 'Frequency' && ldata.fields.field != 'Related Problem' && ldata.fields.field != 'Attachments' && ldata.fields.field_type != '12' && ldata.fields.field_type != '8'">
                                            <div> {{ldata.value}}</div>
                                        </div>
                                        <div ng-if="ldata.fields.field == 'Attachments'">
                                            <div > <div ng-repeat="attach in ldata.attachments" >
                                                    <div ng-init="selData = (attach.orginial_name).split('.')">
                                                        <div ng-if="selData[1] == 'png' || selData[1] == 'gif' || selData[1] == 'jpg' || selData[1] == 'PNG' || selData[1] == 'GIF' || selData[1] == 'JPG'">
                                                            <a  class="filelink" style="cursor: pointer;" ng-click="showRecAttach(attach.attachment_path, attach.orginial_name)" >
                                                                <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                            </a>
                                                        </div>
                                                        <div ng-if="selData[1] != 'png' && selData[1] != 'gif' && selData[1] != 'jpg' && selData[1] != 'PNG' && selData[1] != 'GIF' && selData[1] != 'JPG'">
                                                            <a class="filelink" href="{{attachpath}}{{attach.attachment_path}}{{attach.orginial_name}}"  download>
                                                                <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>				  
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END OF lIFE STYLE -->
        <!-- Procedures -->
        <div ng-controller="ProceduresJoinCtrl" ng-show="procCards">
            <div  class="list card post-item greenbox" ng-repeat="proc in procedure">
                <div class="card-content p0">
                    <div class="row post-heading item item-text-wrap ">
                        <div class="col col-75">
                            <h2 class="post-title">Procedures {{$index + 1}}</h2>
                        </div>
                        <div class="col col-25 txt-right">
                            <div class="infomore" ng-click="infomore(proc.id + 'proc', 'proc')">
                                <span class="infb" id="{{proc.id}}procp"> More</span> <i class="ion-android-arrow-forward"></i>
                            </div>
                        </div>
                    </div>
                    <div class="post-content item item-text-wrap p0">
                        <div class="row" ng-repeat="pdata in proData[$index]| limitTo: 4">
                            <div ng-if="pdata.value != ''">
                                <div class="col"><strong>{{pdata.fields.field}} </strong></div>
                                <div class="col">
                                    <div ng-if="pdata.fields.field == 'Related Problem'">
                                        <div ng-repeat="problem in problems">
                                            <div ng-if="problem.record_id == pdata.value">{{problem.value}}</div>
                                        </div>
                                    </div>
                                    <div ng-if="pdata.fields.field_type == '8'"> {{pdata.value|dateFormat3}}</div>
                                    <div ng-if="pdata.fields.field_type == '12'"> {{pdata.value|time1}}</div>
                                    <div ng-if="pdata.fields.field != 'Related Problem' && pdata.fields.field != 'Attachments' && pdata.fields.field_type != '12' && pdata.fields.field_type != '8'">
                                        <div> {{pdata.value}}</div>
                                    </div>
                                    <div ng-if="pdata.fields.field == 'Attachments'">
                                        <div > <div ng-repeat="attach in pdata.attachments" >
                                                <div ng-init="selData = (attach.orginial_name).split('.')">
                                                    <div ng-if="selData[1] == 'png' || selData[1] == 'gif' || selData[1] == 'jpg' || selData[1] == 'PNG' || selData[1] == 'GIF' || selData[1] == 'JPG'">
                                                        <a  class="filelink" style="cursor: pointer;" ng-click="showRecAttach(attach.attachment_path, attach.orginial_name)" >
                                                            <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                        </a>
                                                    </div>
                                                    <div ng-if="selData[1] != 'png' && selData[1] != 'gif' && selData[1] != 'jpg' && selData[1] != 'PNG' && selData[1] != 'GIF' && selData[1] != 'JPG'">
                                                        <a class="filelink" href="{{attachpath}}{{attach.attachment_path}}{{attach.orginial_name}}"  download>
                                                            <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>				  
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="infomore-div" id="{{proc.id}}proc">
                            <div class="row" ng-repeat="pdata in proData[$index]" ng-if="$index >= 5">
                                <div ng-if="pdata.value != ''">
                                    <div class="col"><strong>{{pdata.fields.field}} </strong></div>
                                    <div class="col">
                                        <div ng-if="pdata.fields.field == 'Related Problem'">
                                            <div ng-repeat="problem in problems">
                                                <div ng-if="problem.record_id == pdata.value">{{problem.value}}</div>
                                            </div>
                                        </div>
                                        <div ng-if="pdata.fields.field_type == '8'"> {{pdata.value|dateFormat3}}</div>
                                        <div ng-if="pdata.fields.field_type == '12'"> {{pdata.value|time1}}</div>
                                        <div ng-if="pdata.fields.field != 'Related Problem' && pdata.fields.field != 'Attachments' && pdata.fields.field_type != '12' && pdata.fields.field_type != '8'">
                                            <div> {{pdata.value}}</div>
                                        </div>
                                        <div ng-if="pdata.fields.field == 'Attachments'">
                                            <div > <div ng-repeat="attach in pdata.attachments" >
                                                    <div ng-init="selData = (attach.orginial_name).split('.')">
                                                        <div ng-if="selData[1] == 'png' || selData[1] == 'gif' || selData[1] == 'jpg' || selData[1] == 'PNG' || selData[1] == 'GIF' || selData[1] == 'JPG'">
                                                            <a  class="filelink" style="cursor: pointer;" ng-click="showRecAttach(attach.attachment_path, attach.orginial_name)" >
                                                                <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                            </a>
                                                        </div>
                                                        <div ng-if="selData[1] != 'png' && selData[1] != 'gif' && selData[1] != 'jpg' && selData[1] != 'PNG' && selData[1] != 'GIF' && selData[1] != 'JPG'">
                                                            <a class="filelink" href="{{attachpath}}{{attach.attachment_path}}{{attach.orginial_name}}"  download>
                                                                <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>				  
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- end Procedures -->
        <!-- REFERRAL -->
        <div ng-controller="ReferralJoinCtrl" ng-show="refCards">
            <div  class="list card post-item greenbox" ng-repeat="ref in referral" >
                <div class="card-content p0">
                    <div class="row post-heading item item-text-wrap ">
                        <div class="col col-75">
                            <h2 class="post-title">Referral {{$index + 1}}</h2>
                        </div>
                        <div class="col col-25 txt-right">
                            <div class="infomore" ng-click="infomore(ref.id + 'ref', 'ref')">
                                <span class="infb" id="{{ref.id}}refr"> More</span> <i class="ion-android-arrow-forward"></i>
                            </div>
                        </div>
                    </div>
                    <div class="post-content item item-text-wrap p0">
                        <div class="row" ng-repeat="rdata in refData[$index]| limitTo: 4">
                            <div ng-if="rdata.value != ''">
                                <div class="col"><strong>{{rdata.fields.field}} </strong></div>
                                <div class="col"> 
                                    <div ng-if="rdata.fields.field == 'Related Problem'">
                                        <div ng-repeat="problem in problems">
                                            <div ng-if="problem.record_id == rdata.value">{{problem.value}}</div>
                                        </div>
                                    </div>
                                    <div ng-if="rdata.fields.field_type == '8'"> {{rdata.value|dateFormat3}}</div>
                                    <div ng-if="rdata.fields.field_type == '12'"> {{rdata.value|time1}}</div>
                                    <div ng-if="rdata.fields.field != 'Related Problem' && rdata.fields.field != 'Attachments' && rdata.fields.field_type != '12' && rdata.fields.field_type != '8'">
                                        <div > {{rdata.value}}</div>
                                    </div>
                                    <div ng-if="rdata.fields.field == 'Attachments'">
                                        <div > <div ng-repeat="attach in rdata.attachments" >
                                                <div ng-init="selData = (attach.orginial_name).split('.')">
                                                    <div ng-if="selData[1] == 'png' || selData[1] == 'gif' || selData[1] == 'jpg' || selData[1] == 'PNG' || selData[1] == 'GIF' || selData[1] == 'JPG'">
                                                        <a  class="filelink" style="cursor: pointer;" ng-click="showRecAttach(attach.attachment_path, attach.orginial_name)" >
                                                            <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                        </a>
                                                    </div>
                                                    <div ng-if="selData[1] != 'png' && selData[1] != 'gif' && selData[1] != 'jpg' && selData[1] != 'PNG' && selData[1] != 'GIF' && selData[1] != 'JPG'">
                                                        <a class="filelink" href="{{attachpath}}{{attach.attachment_path}}{{attach.orginial_name}}"  download>
                                                            <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>				  
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="infomore-div" id="{{ref.id}}ref">
                            <div class="row" ng-repeat="rdata in refData[$index]" ng-if="$index >= 5">
                                <div ng-if="rdata.value != ''">
                                    <div class="col"><strong>{{rdata.fields.field}} </strong></div>
                                    <div class="col"> 
                                        <div ng-if="rdata.fields.field == 'Related Problem'">
                                            <div ng-repeat="problem in problems">
                                                <div ng-if="problem.record_id == rdata.value">{{problem.value}}</div>
                                            </div>
                                        </div>
                                        <div ng-if="rdata.fields.field_type == '8'"> {{rdata.value|dateFormat3}}</div>
                                        <div ng-if="rdata.fields.field_type == '12'"> {{rdata.value|time1}}</div>
                                        <div ng-if="rdata.fields.field != 'Related Problem' && rdata.fields.field != 'Attachments' && rdata.fields.field_type != '12' && rdata.fields.field_type != '8'">
                                            <div > {{rdata.value}}</div>
                                        </div>
                                        <div ng-if="rdata.fields.field == 'Attachments'">
                                            <div > <div ng-repeat="attach in rdata.attachments" >
                                                    <div ng-init="selData = (attach.orginial_name).split('.')">
                                                        <div ng-if="selData[1] == 'png' || selData[1] == 'gif' || selData[1] == 'jpg' || selData[1] == 'PNG' || selData[1] == 'GIF' || selData[1] == 'JPG'">
                                                            <a  class="filelink" style="cursor: pointer;" ng-click="showRecAttach(attach.attachment_path, attach.orginial_name)" >
                                                                <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                            </a>
                                                        </div>
                                                        <div ng-if="selData[1] != 'png' && selData[1] != 'gif' && selData[1] != 'jpg' && selData[1] != 'PNG' && selData[1] != 'GIF' && selData[1] != 'JPG'">
                                                            <a class="filelink" href="{{attachpath}}{{attach.attachment_path}}{{attach.orginial_name}}"  download>
                                                                <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>				  
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End of REFERRAL -->
        <!-- DIET PLAN -->
        <div ng-controller="DietJoinCtrl" ng-show="dietCards">
            <div class="list card post-item greenbox" ng-repeat="dt in prevDietRec">
                <div class="card-content p0">
                    <div class="row post-heading item item-text-wrap ">
                        <div class="col col-75">
                            <h2 class="post-title">Diet Plan {{$index + 1}}</h2>
                        </div>
                        <div class="col col-25 txt-right">
                            <div class="infomore" ng-click="infomore(dt.id + 'diet', 'diet')">
                                <span class="infb" id="{{dt.id}}dietd"> More</span> <i class="ion-android-arrow-forward"></i>
                            </div>
                        </div>
                    </div>
                    <div class="post-content item item-text-wrap p0">
                        <div class="row" ng-repeat="mdata in prevDietData[$index]| limitTo: 4">
                            <div ng-if="mdata.value != ''">
                                <div class="col" ng-if="mdata.fields.name != 'patient-4'"><strong>{{mdata.fields.field}} </strong></div>
                                <div class="col"> 
                                    <div ng-if="mdata.fields.field == 'Related Problem'">
                                        <div ng-repeat="problem in problems">
                                            <div ng-if="problem.record_id == mdata.value">{{problem.value}}</div>
                                        </div>
                                    </div>
                                    <div ng-if="mdata.fields.field_type == '8'"> {{mdata.value|dateFormat3}}</div>
                                    <div ng-if="mdata.fields.field_type == '12'"> {{mdata.value|time1}}</div>
                                    <div ng-if="mdata.fields.field == 'No of days'"> 
                                        <div class="dietdays">
                                            <button class="button button-small inbtn {{dd.isEmptyObj? 'filled-data':'filldata'}}" ng-repeat="dd in dietRec[$parent.$parent.$parent.$index]" ng-click="daymodalDisp($parent.$parent.$parent.$parent.$index, $index)">
                                                <!--<span class="icon ion-plus-circled"></span>--> Day {{$index + 1}}</button>
                                        </div>
                                    </div>
                                    <div ng-if="mdata.fields.name != 'patient-4' && mdata.fields.field != 'Related Problem' && mdata.fields.field != 'No of days' && mdata.fields.field != 'Attachments' && mdata.fields.field_type != '12' && mdata.fields.field_type != '8'">
                                        <div> {{mdata.value}}</div>
                                    </div>
                                    <div ng-if="mdata.fields.field == 'Attachments'">
                                        <div > <div ng-repeat="attach in mdata.attachments" >
                                                <div ng-init="selData = (attach.orginial_name).split('.')">
                                                    <div ng-if="selData[1] == 'png' || selData[1] == 'gif' || selData[1] == 'jpg' || selData[1] == 'PNG' || selData[1] == 'GIF' || selData[1] == 'JPG'">
                                                        <a  class="filelink" style="cursor: pointer;" ng-click="showRecAttach(attach.attachment_path, attach.orginial_name)" >
                                                            <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                        </a>
                                                    </div>
                                                    <div ng-if="selData[1] != 'png' && selData[1] != 'gif' && selData[1] != 'jpg' && selData[1] != 'PNG' && selData[1] != 'GIF' && selData[1] != 'JPG'">
                                                        <a class="filelink" href="{{attachpath}}{{attach.attachment_path}}{{attach.orginial_name}}"  download>
                                                            <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>				  
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="infomore-div" id="{{dt.id}}diet">
                            <div class="row" ng-repeat="mdata in prevDietData[$index]" ng-if="$index >= 5">
                                <div ng-if="mdata.value != ''">
                                    <div class="col" ng-if="mdata.fields.name != 'patient-4'"><strong>{{mdata.fields.field}} </strong></div>
                                    <div class="col">
                                        <div ng-if="mdata.fields.field == 'Related Problem'">
                                            <div ng-repeat="problem in problems">
                                                <div ng-if="problem.record_id == mdata.value">{{problem.value}}</div>
                                            </div>
                                        </div>
                                        <div ng-if="mdata.fields.field_type == '8'"> {{mdata.value|dateFormat3}}</div>
                                        <div ng-if="mdata.fields.field_type == '12'"> {{mdata.value|time1}}</div>
                                        <div ng-if="mdata.fields.field == 'No of days'"> 
                                            <div class="dietdays">
                                                <button class="button button-small inbtn {{dd.isEmptyObj? 'filled-data':'filldata'}}" ng-repeat="dd in dietRec[$parent.$parent.$parent.$index]" ng-click="daymodalDisp($parent.$parent.$parent.$parent.$index, $index)">
                                                    <!--<span class="icon ion-plus-circled"></span>--> Day {{$index + 1}}</button>
                                            </div>
                                        </div>
                                        <div ng-if="mdata.fields.name != 'patient-4' && mdata.fields.field != 'Related Problem' && mdata.fields.field != 'No of days' && mdata.fields.field != 'Attachments' && mdata.fields.field_type != '12' && mdata.fields.field_type != '8'">
                                            <div> {{mdata.value}}</div>
                                        </div>
                                        <div ng-if="mdata.fields.field == 'Attachments'">
                                            <div > <div ng-repeat="attach in mdata.attachments" >
                                                    <div ng-init="selData = (attach.orginial_name).split('.')">
                                                        <div ng-if="selData[1] == 'png' || selData[1] == 'gif' || selData[1] == 'jpg' || selData[1] == 'PNG' || selData[1] == 'GIF' || selData[1] == 'JPG'">
                                                            <a  class="filelink" style="cursor: pointer;" ng-click="showRecAttach(attach.attachment_path, attach.orginial_name)" >
                                                                <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                            </a>
                                                        </div>
                                                        <div ng-if="selData[1] != 'png' && selData[1] != 'gif' && selData[1] != 'jpg' && selData[1] != 'PNG' && selData[1] != 'GIF' && selData[1] != 'JPG'">
                                                            <a class="filelink" href="{{attachpath}}{{attach.attachment_path}}{{attach.orginial_name}}"  download>
                                                                <span class="ico"><i class="ion-paperclip"></i></span> ({{$index + 1}})
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>				  
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script id="mealdetails" type="text/ng-template">
        <ion-modal-view>
        <ion-header-bar class="bar app-top-bar">
        <h1 class="modalhead txt-center">Meal Details - {{Mealday}}</h1>
        <button class="button button-clear pull-left" ng-click="submitmodal()">Cancel</button>
        <div class="buttons buttons-right pull-right"><span class="right-buttons">
        <button type="submit" ng-click="saveMeal(day)" class="button button-positive w100p brdradious0" ng-disabled="addRecordForm.$invalid" disabled="disabled"> 
        <strong>Save</strong> </button>
        </span></div>
        </ion-header-bar>
        <ion-content>
        <div ng-repeat="meal in mealDetails[day]">
        <div class="item item-divider mt15">Meal {{$index+1}}</div>
        <label class="item item-input">
        <input type="time" placeholder="Time" ng-model="mealDetails[day][$index].time"  required="">
        </label>
        <label class="item item-input">
        <textarea placeholder="Notes" name="" ng-model="mealDetails[day][$index].details" maxlength="" rows="2" cols="50"></textarea>
        </label>
        </div>  
        </ion-content>
        </ion-modal-view>
    </script>

    <script id="mealdispdetails" type="text/ng-template">
        <ion-modal-view>
        <ion-header-bar class="bar app-top-bar">
        <h1 class="modalhead txt-center">Meal Details - {{Mealday}}</h1>
        <button class="button button-clear pull-right" ng-click="submitmodal()">Cancel</button>       
        </ion-header-bar>
        <ion-content>
        <div ng-if="dietPlanDetails.length == 0"><p class="text-center">No data added</p></div>
        <div ng-repeat="diet in dietPlanDetails">
        <div class="item item-divider mt15">Meal {{$index+1}}</div>
        <div ng-repeat="meal in diet" ng-if="meal.fields.name == 'meal-1' || meal.fields.name == 'value'">
        <div class="row" >
        <div class="col" ng-if="meal.fields.field == 'Time' && meal.value != '' && meal.value != '00:00:00'">{{meal.value|timeN}}</div>
        <div class="col" ng-if="meal.fields.field != 'Time'">{{meal.value}}</div>
        </div>
        </div>
        </div>  
        </ion-content>
        </ion-modal-view>
    </script>
